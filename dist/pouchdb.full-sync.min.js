!function e(t,n,r){function i(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";function r(e,t){e=parseInt(e,10),t=parseInt(t,10),e!==e&&(e=0),t!==t||e>=t?t=(e||1)<<1:t+=1;var n=Math.random(),r=t-e;return~~(r*n+e)}function i(e){var t=0;return e||(t=2e3),r(e,t)}function o(e,t,n,r,o,s,c){return r.retry===!1?(o.emit("error",c),void o.removeAllListeners()):(r.default_back_off=r.default_back_off||0,r.retries=r.retries||0,"function"!=typeof r.back_off_function&&(r.back_off_function=i),r.retries++,r.max_retries&&r.retries>r.max_retries?(o.emit("error",new Error("tried "+r.retries+" times but replication failed")),void o.removeAllListeners()):(o.emit("requestError",c),"active"===o.state&&(o.emit("paused",c),o.state="stopped",o.once("active",function(){r.current_back_off=r.default_back_off})),r.current_back_off=r.current_back_off||r.default_back_off,r.current_back_off=r.back_off_function(r.current_back_off),void setTimeout(function(){u(e,t,n,r,o)},r.current_back_off)))}function s(){h.call(this),this.cancelled=!1,this.state="pending";var e=this,t=new l.Promise(function(t,n){e.once("complete",t),e.once("error",n)});e.then=function(e,n){return t.then(e,n)},e["catch"]=function(e){return t["catch"](e)},e["catch"](function(){})}function c(e,t,n){var r=n.filter?n.filter.toString():"";return e.id().then(function(e){return t.id().then(function(t){var i=e+t+r+JSON.stringify(n.query_params)+n.doc_ids;return l.MD5(i).then(function(e){return e=e.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+e})})})}function u(e,t,n,r,i,s){function c(){if(0!==j.docs.length){var e=j.docs;return n.bulkDocs({docs:e,new_edits:!1}).then(function(t){if(B.cancelled)throw b(),new Error("cancelled");var n=[],r={};t.forEach(function(e){e.error&&(s.doc_write_failures++,n.push(e),r[e.id]=e)}),s.errors=n,U=U.concat(n),s.docs_written+=j.docs.length-n.length;var o=n.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(N=[],e.forEach(function(e){var t=r[e._id];t?i.emit("denied",l.clone(t)):N.push(e)}),o.length>0){var c=new Error("bulkDocs error");throw c.other_errors=n,_("target.bulkDocs failed to write docs",c),new Error("bulkWrite partial failure")}},function(t){throw s.doc_write_failures+=e.length,t})}}function u(e){var n=j.diffs,r=n[e].missing,i={};return r.forEach(function(e){i[e]=!0}),l.Promise.all(r.map(function(n){var r={revs:!0,rev:n};return t.get(e,r).then(function(e){e._revisions.ids.forEach(function(t,n){var r=e._revisions.start-n+"-"+t;i[r]=!0})})})).then(function(){for(var r=Object.keys(i),o=[],c=0;c<r.length;c+=d)o.push(r.slice(c,Math.min(r.length,c+d)));return l.Promise.all(o.map(function(r){var i={revs:!0,open_revs:r,attachments:!0};return t.get(e,i).then(function(t){t.forEach(function(e){return B.cancelled?b():void(e.ok&&(s.docs_read++,j.pendingRevs++,j.docs.push(e.ok)))}),delete n[e]})}))})}function a(){var e=Object.keys(j.diffs);return l.Promise.all(e.map(u))}function f(){var e=Object.keys(j.diffs).filter(function(e){var t=j.diffs[e].missing;return 1===t.length&&"1-"===t[0].slice(0,2)});return e.length?t.allDocs({keys:e,include_docs:!0}).then(function(e){if(B.cancelled)throw b(),new Error("cancelled");e.rows.forEach(function(e){!e.doc||e.deleted||"1-"!==e.value.rev.slice(0,2)||e.doc._attachments&&0!==Object.keys(e.doc._attachments).length||(s.docs_read++,j.pendingRevs++,j.docs.push(e.doc),delete j.diffs[e.id])})}):l.Promise.resolve()}function h(){return f().then(a)}function v(){return C=!0,R.writeCheckpoint(j.seq).then(function(){if(C=!1,B.cancelled)throw b(),new Error("cancelled");s.last_seq=S=j.seq;var e=l.clone(s);e.docs=N,i.emit("change",e),j=void 0,L()})["catch"](function(e){throw C=!1,_("writeCheckpoint completed with error",e),e})}function y(){var e={};return j.changes.forEach(function(t){"_user/"!==t.id&&(e[t.id]=t.changes.map(function(e){return e.rev}))}),n.revsDiff(e).then(function(e){if(B.cancelled)throw b(),new Error("cancelled");j.diffs=e,j.pendingRevs=0})}function m(){if(!B.cancelled&&!j){if(0===E.length)return void g(!0);j=E.shift(),y().then(h).then(c).then(v).then(m)["catch"](function(e){_("batch processing terminated with error",e)})}}function g(e){return 0===q.changes.length?void(0!==E.length||j||((M&&z.live||O)&&(i.state="pending",i.emit("paused"),i.emit("uptodate",s)),O&&b())):void((e||O||q.changes.length>=F)&&(E.push(q),q={seq:0,changes:[],docs:[]},"pending"!==i.state&&"stopped"!==i.state||(i.state="active",i.emit("active")),m()))}function _(e,t){P||(t.message||(t.message=e),s.ok=!1,s.status="aborting",s.errors.push(t),U=U.concat(t),E=[],q={seq:0,changes:[],docs:[]},b())}function b(){if(!(P||B.cancelled&&(s.status="cancelled",C))){s.status=s.status||"complete",s.end_time=new Date,s.last_seq=S,P=B.cancelled=!0;var c=U.filter(function(e){return"unauthorized"!==e.name&&"forbidden"!==e.name});if(c.length>0){var u=U.pop();U.length>0&&(u.other_errors=U),u.result=s,o(e,t,n,r,i,s,u)}else s.errors=U,i.emit("complete",s),i.removeAllListeners()}}function w(e){if(B.cancelled)return b();var t=l.filterChange(r)(e);t&&(0!==q.changes.length||0!==E.length||j||i.emit("outofdate",s),q.seq=e.seq,q.changes.push(e),g(0===E.length))}function k(e){return D=!1,B.cancelled?b():(e.results.length>0?(z.since=e.last_seq,L()):M?(z.live=!0,L()):O=!0,void g(!0))}function x(e){return D=!1,B.cancelled?b():void _("changes rejected",e)}function L(){function e(){r.cancel()}function n(){i.removeListener("cancel",e)}if(!D&&!O&&E.length<T){D=!0,i.once("cancel",e);var r=t.changes(z).on("change",w);r.then(n,n),r.then(k)["catch"](x)}}function A(){R.getCheckpoint().then(function(e){S=e,z={since:S,limit:F,batch_size:F,style:"all_docs",doc_ids:I,returnDocs:!0},r.filter&&("string"!=typeof r.filter?z.include_docs=!0:z.filter=r.filter),r.query_params&&(z.query_params=r.query_params),r.view&&(z.view=r.view),L()})["catch"](function(e){_("getCheckpoint rejected with ",e)})}var j,E=[],q={seq:0,changes:[],docs:[]},C=!1,O=!1,P=!1,S=0,M=r.continuous||r.live||!1,F=r.batch_size||100,T=r.batches_limit||10,D=!1,I=r.doc_ids,B={cancelled:!1},R=new p(t,n,e,B),U=[],N=[];s=s||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var z={};return i.ready(t,n),i.cancelled?void b():(i.once("cancel",b),"function"==typeof r.onChange&&i.on("change",r.onChange),"function"==typeof r.complete&&(i.once("error",r.complete),i.once("complete",function(e){r.complete(null,e)})),void("undefined"==typeof r.since?A():(C=!0,R.writeCheckpoint(r.since).then(function(){return C=!1,B.cancelled?void b():(S=r.since,void A())})["catch"](function(e){throw C=!1,_("writeCheckpoint completed with error",e),e}))))}function a(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e.then?e:l.Promise.resolve(e)}function f(e,t,n,r){"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n.complete||(n.complete=r||function(){}),n=l.clone(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:v,n.PouchConstructor=n.PouchConstructor||this;var i=new s(n);return a(e,n).then(function(e){return a(t,n).then(function(t){return c(e,t,n).then(function(r){u(r,e,t,n,i)})})})["catch"](function(e){i.emit("error",e),n.complete(e)}),i}var l=e("./utils"),h=e("events").EventEmitter,p=e("pouchdb/extras/checkpointer"),d=50,v=!1;l.inherits(s,h),s.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},s.prototype.ready=function(e,t){function n(){i.cancel()}function r(){e.removeListener("destroyed",n),t.removeListener("destroyed",n)}var i=this;e.once("destroyed",n),t.once("destroyed",n),this.then(r,r)},t.exports={replicate:f,toPouch:a}},{"./utils":4,events:6,"pouchdb/extras/checkpointer":12}],2:[function(e,t,n){(function(n,r){"use strict";function i(e){var t=[255&e,e>>>8&255,e>>>16&255,e>>>24&255];return t.map(function(e){return String.fromCharCode(e)}).join("")}function o(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n]);return btoa(t)}function s(e,t,n,r){(n>0||r<t.byteLength)&&(t=new Uint8Array(t,n,Math.min(r,t.byteLength)-n)),e.append(t)}function c(e,t,n,r){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t)}var u=e("crypto"),a=e("spark-md5"),f=r.setImmediate||r.setTimeout,l=32768;t.exports=function(e,t){function r(){var n=y*d,i=n+d;if(y++,v>y)g(m,e,n,i),f(r);else{g(m,e,n,i);var s=m.end(!0),c=o(s);t(null,c),m.destroy()}}if(!n.browser){var i=u.createHash("md5").update(e).digest("base64");return void t(null,i)}var h="string"==typeof e,p=h?e.length:e.byteLength,d=Math.min(l,p),v=Math.ceil(p/d),y=0,m=h?new a:new a.ArrayBuffer,g=h?c:s;r()}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:17,crypto:5,"spark-md5":18}],3:[function(e,t,n){"use strict";function r(e,t,n,r){return"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n=o.clone(n),n.PouchConstructor=n.PouchConstructor||this,e=s.toPouch(e,n),t=s.toPouch(t,n),new i(e,t,n,r)}function i(e,t,n,r){function i(e){v||(v=!0,h.emit("cancel",e))}function s(e){h.emit("change",{direction:"pull",change:e})}function u(e){h.emit("change",{direction:"push",change:e})}function a(e){h.emit("denied",{direction:"push",doc:e})}function f(e){h.emit("denied",{direction:"pull",doc:e})}function l(e){return function(t,n){var r="change"===t&&(n===s||n===u),o="cancel"===t&&n===i,c=t in y&&n===y[t];(r||o||c)&&(t in m||(m[t]={}),m[t][e]=!0,2===Object.keys(m[t]).length&&h.removeAllListeners(t))}}var h=this;this.canceled=!1;var p,d;"onChange"in n&&(p=n.onChange,delete n.onChange),"function"!=typeof r||n.complete?"complete"in n&&(d=n.complete,delete n.complete):d=r,this.push=c(e,t,n),this.pull=c(t,e,n);var v=!1,y={},m={};n.live&&(this.push.on("complete",h.pull.cancel.bind(h.pull)),this.pull.on("complete",h.push.cancel.bind(h.push))),this.on("newListener",function(e){"change"===e?(h.pull.on("change",s),h.push.on("change",u)):"denied"===e?(h.pull.on("denied",f),h.push.on("denied",a)):"cancel"===e?(h.pull.on("cancel",i),h.push.on("cancel",i)):"error"===e||"removeListener"===e||"complete"===e||e in y||(y[e]=function(t){h.emit(e,t)},h.pull.on(e,y[e]),h.push.on(e,y[e]))}),this.on("removeListener",function(e){"change"===e?(h.pull.removeListener("change",s),h.push.removeListener("change",u)):"cancel"===e?(h.pull.removeListener("cancel",i),h.push.removeListener("cancel",i)):e in y&&"function"==typeof y[e]&&(h.pull.removeListener(e,y[e]),h.push.removeListener(e,y[e]),delete y[e])}),this.pull.on("removeListener",l("pull")),this.push.on("removeListener",l("push"));var g=o.Promise.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return h.emit("complete",t),d&&d(null,t),h.removeAllListeners(),t},function(e){throw h.cancel(),h.emit("error",e),d&&d(e),h.removeAllListeners(),e});this.then=function(e,t){return g.then(e,t)},this["catch"]=function(e){return g["catch"](e)}}var o=e("./utils"),s=e("./fully-replicate"),c=s.replicate,u=e("events").EventEmitter;o.inherits(i,u),t.exports=r,i.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}},{"./fully-replicate":1,"./utils":4,events:6}],4:[function(e,t,n){(function(t){"use strict";var r=e("pouchdb/extras/promise");n.once=function(e){var t=!1;return n.getArguments(function(n){if(t)throw console.trace(),new Error("once called  more than once");t=!0,e.apply(this,n)})},n.getArguments=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}},n.toPromise=function(e){return n.getArguments(function(i){var o,s=this,c="function"==typeof i[i.length-1]?i.pop():!1;c&&(o=function(e,n){t.nextTick(function(){c(e,n)})});var u=new r(function(t,r){try{var o=n.once(function(e,n){e?r(e):t(n)});i.push(o),e.apply(s,i)}catch(c){r(c)}});return o&&u.then(function(e){o(null,e)},o),u.cancel=function(){return this},u})},n.inherits=e("inherits"),n.Promise=r,n.extend=e("pouchdb-extend"),n.clone=function(e){return n.extend(!0,{},e)},n.MD5=n.toPromise(e("./md5")),n.filterChange=function(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){if(r.doc||(r.doc={}),e.filter&&n&&!e.filter.call(this,r.doc,t))return!1;if(e.include_docs){if(!e.attachments)for(var i in r.doc._attachments)r.doc._attachments.hasOwnProperty(i)&&(r.doc._attachments[i].stub=!0)}else delete r.doc;return!0}}}).call(this,e("_process"))},{"./md5":2,_process:17,inherits:8,"pouchdb-extend":11,"pouchdb/extras/promise":13}],5:[function(e,t,n){},{}],6:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,u,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],c(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(a=n.slice(),r=a.length,u=0;r>u;u++)a[u].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,c;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(c=o;c-- >0;)if(n[c]===t||n[c].listener&&n[c].listener===t){r=c;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t,n){(function(e){"use strict";function n(){f=!0;for(var e,t,n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}f=!1}function r(e){1!==l.push(e)||f||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var s=0,c=new o(n),u=e.document.createTextNode("");c.observe(u,{characterData:!0}),i=function(){u.data=s=++s%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var a=new e.MessageChannel;a.port1.onmessage=n,i=function(){a.port2.postMessage(0)}}var f,l=[];t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],9:[function(e,t,n){"use strict";function r(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return f(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),i=-1,o=r.length,s="";if(t)for(;++i<o;)s+=n.toIndexableString(r[i]);else for(;++i<o;){var c=r[i];s+=n.toIndexableString(c)+n.toIndexableString(e[c])}return s}return""}function i(e,t){var n,r=t,i="1"===e[t];if(i)n=0,t++;else{var o="0"===e[t];t++;var s="",c=e.substring(t,t+h),u=parseInt(c,10)+l;for(o&&(u=-u),t+=h;;){var a=e[t];if("\x00"===a)break;s+=a,t++}s=s.split("."),n=1===s.length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),o&&(n-=10),0!==u&&(n=parseFloat(n+"e"+u))}return{num:n,length:t-r}}function o(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===e.length-2){var s=e.pop();i[s]=n}else e.push(n)}}function s(e,t){for(var r=Math.min(e.length,t.length),i=0;r>i;i++){var o=n.collate(e[i],t[i]);if(0!==o)return o}return e.length===t.length?0:e.length>t.length?1:-1}function c(e,t){return e===t?0:e>t?1:-1}function u(e,t){for(var r=Object.keys(e),i=Object.keys(t),o=Math.min(r.length,i.length),s=0;o>s;s++){var c=n.collate(r[s],i[s]);if(0!==c)return c;if(c=n.collate(e[r[s]],t[i[s]]),0!==c)return c}return r.length===i.length?0:r.length>i.length?1:-1}function a(e){var t=["boolean","number","string","object"],n=t.indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:3>n?n+2:n+3:Array.isArray(e)?5:void 0}function f(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=0>e,i=r?"0":"2",o=(r?-n:n)-l,s=d.padLeft(o.toString(),"0",h);i+=p+s;var c=Math.abs(parseFloat(t[0]));r&&(c=10-c);var u=c.toFixed(20);return u=u.replace(/\.?0+$/,""),i+=p+u}var l=-324,h=3,p="",d=e("./utils");n.collate=function(e,t){if(e===t)return 0;e=n.normalizeKey(e),t=n.normalizeKey(t);var r=a(e),i=a(t);if(r-i!==0)return r-i;if(null===e)return 0;switch(typeof e){case"number":return e-t;case"boolean":return e===t?0:t>e?-1:1;case"string":return c(e,t)}return Array.isArray(e)?s(e,t):u(e,t)},n.normalizeKey=function(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-(1/0)||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var i=0;r>i;i++)e[i]=n.normalizeKey(t[i])}else{if(e instanceof Date)return e.toJSON();if(null!==e){e={};for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];"undefined"!=typeof s&&(e[o]=n.normalizeKey(s))}}}}return e},n.toIndexableString=function(e){var t="\x00";return e=n.normalizeKey(e),a(e)+p+r(e)+t},n.parseIndexableString=function(e){for(var t=[],n=[],r=0;;){var s=e[r++];if("\x00"!==s)switch(s){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var c=i(e,r);t.push(c.num),r+=c.length;break;case"4":for(var u="";;){var a=e[r];if("\x00"===a)break;u+=a,r++}u=u.replace(/\u0001\u0001/g,"\x00").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(u);break;case"5":var f={element:[],index:t.length};t.push(f.element),n.push(f);break;case"6":var l={element:{},index:t.length};t.push(l.element),n.push(l);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+s)}else{if(1===t.length)return t.pop();o(t,n)}}}},{"./utils":10}],10:[function(e,t,n){"use strict";function r(e,t,n){for(var r="",i=n-e.length;r.length<i;)r+=t;return r}n.padLeft=function(e,t,n){var i=r(e,t,n);return i+e},n.padRight=function(e,t,n){var i=r(e,t,n);return e+i},n.stringLexCompare=function(e,t){var n,r=e.length,i=t.length;for(n=0;r>n;n++){if(n===i)return 1;var o=e.charAt(n),s=t.charAt(n);if(o!==s)return s>o?-1:1}return i>r?-1:0},n.intToDecimalForm=function(e){var t=0>e,n="";do{var r=t?-Math.ceil(e%10):Math.floor(e%10);n=r+n,e=t?Math.ceil(e/10):Math.floor(e/10)}while(e);return t&&"0"!==n&&(n="-"+n),n}},{}],11:[function(e,t,n){"use strict";function r(e){return null===e?String(e):"object"==typeof e||"function"==typeof e?a[p.call(e)]||"object":typeof e}function i(e){return null!==e&&e===e.window}function o(e){if(!e||"object"!==r(e)||e.nodeType||i(e))return!1;try{if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in e);return void 0===n||d.call(e,n)}function s(e){return"function"===r(e)}function c(){for(var e=[],t=-1,n=arguments.length,r=new Array(n);++t<n;)r[t]=arguments[t];var i={};e.push({args:r,result:{container:i,key:"key"}});for(var o;o=e.pop();)u(e,o.args,o.result);return i.key}function u(e,t,n){var r,i,c,u,a,f,l,h=t[0]||{},p=1,d=t.length,y=!1,m=/\d+/;for("boolean"==typeof h&&(y=h,h=t[1]||{},p=2),"object"==typeof h||s(h)||(h={}),d===p&&(h=this,--p);d>p;p++)if(null!=(r=t[p])){l=v(r);for(i in r)if(!(i in Object.prototype)){if(l&&!m.test(i))continue;if(c=h[i],u=r[i],h===u)continue;y&&u&&(o(u)||(a=v(u)))?(a?(a=!1,f=c&&v(c)?c:[]):f=c&&o(c)?c:{},e.push({args:[y,f,u],result:{container:h,key:i}})):void 0!==u&&(v(r)&&s(u)||(h[i]=u))}}n.container[n.key]=h}for(var a={},f=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],l=0;l<f.length;l++){var h=f[l];a["[object "+h+"]"]=h.toLowerCase()}var p=a.toString,d=a.hasOwnProperty,v=Array.isArray||function(e){return"array"===r(e)};t.exports=c},{}],12:[function(e,t,n){"use strict";t.exports=e("../lib/extras/checkpointer")},{"../lib/extras/checkpointer":14}],13:[function(e,t,n){"use strict";t.exports=e("../lib/extras/promise")},{"../lib/extras/promise":15}],14:[function(e,t,n){(function(n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}function i(e,t){"console"in n&&"info"in console&&console.info("The above "+e+" is totally normal. "+t)}function o(e,t,n,r,s){return e.get(t)["catch"](function(n){if(404===n.status)return"http"===e.type()&&i(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:y,version:v};throw n}).then(function(i){return s.cancelled?void 0:(i.history=(i.history||[]).filter(function(e){return e.session_id!==r}),i.history.unshift({last_seq:n,session_id:r}),i.history=i.history.slice(0,m),i.version=v,i.replicator=y,i.session_id=r,i.last_seq=n,e.put(i)["catch"](function(i){if(409===i.status)return o(e,t,n,r,s);throw i}))})}function s(e,t,n,r){this.src=e,this.target=t,this.id=n,this.returnValue=r}function c(e,t){if(e.session_id===t.session_id)return{last_seq:e.last_seq,history:e.history||[]};var n=e.history||[],r=t.history||[];return u(n,r)}function u(e,t){var n=e[0],r=e.slice(1),i=t[0],o=t.slice(1);if(!n||0===t.length)return{last_seq:g,history:[]};var s=n.session_id;if(a(s,t))return{last_seq:n.last_seq,history:e};var c=i.session_id;return a(c,r)?{last_seq:i.last_seq,history:o}:u(r,o)}function a(e,t){var n=t[0],r=t.slice(1);return e&&0!==t.length?e===n.session_id?!0:a(e,r):!1}function f(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}var l=r(e("lie")),h=r(e("pouchdb-collate")),p="function"==typeof Promise?Promise:l,d=h.collate,v=1,y="pouchdb",m=5,g=0;s.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},s.prototype.updateTarget=function(e,t){return o(this.target,this.id,e,t,this.returnValue)},s.prototype.updateSource=function(e,t){var n=this;return this.readOnlySource?p.resolve(!0):o(this.src,this.id,e,t,this.returnValue)["catch"](function(e){if(f(e))return n.readOnlySource=!0,!0;throw e})};var _={undefined:function(e,t){return 0===d(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return c(t,e).last_seq}};s.prototype.getCheckpoint=function(){var e=this;return e.target.get(e.id).then(function(t){return e.readOnlySource?p.resolve(t.last_seq):e.src.get(e.id).then(function(e){if(t.version!==e.version)return g;var n;return n=t.version?t.version.toString():"undefined",n in _?_[n](t,e):g},function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:g}).then(function(){return g},function(n){return f(n)?(e.readOnlySource=!0,t.last_seq):g});throw n})})["catch"](function(e){if(404!==e.status)throw e;return g})},t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lie:16,"pouchdb-collate":9}],15:[function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e["default"]:e}var i=r(e("lie")),o="function"==typeof Promise?Promise:i;t.exports=o},{lie:16}],16:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,e!==r&&u(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(e,t,n){d(function(){var r;try{r=t(n)}catch(i){return v.reject(e,i)}r===e?v.reject(e,new TypeError("Cannot resolve promise with itself")):v.resolve(e,r)})}function c(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function u(e,t){function n(t){o||(o=!0,v.reject(e,t))}function r(t){o||(o=!0,v.resolve(e,t))}function i(){t(r,n)}var o=!1,s=a(i);"error"===s.status&&n(s.value)}function a(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function f(e){return e instanceof this?e:v.resolve(new this(r),e)}function l(e){var t=new this(r);return v.reject(t,e)}function h(e){function t(e,t){function r(e){s[t]=e,++c!==i||o||(o=!0,v.resolve(a,s))}n.resolve(e).then(r,function(e){o||(o=!0,v.reject(a,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),c=0,u=-1,a=new this(r);++u<i;)t(e[u],u);return a}function p(e){function t(e){n.resolve(e).then(function(e){o||(o=!0,v.resolve(c,e))},function(e){o||(o=!0,v.reject(c,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,c=new this(r);++s<i;)t(e[s]);return c}var d=e("immediate"),v={},y=["REJECTED"],m=["FULFILLED"],g=["PENDING"];t.exports=n=i,i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===m||"function"!=typeof t&&this.state===y)return this;var n=new this.constructor(r);if(this.state!==g){var i=this.state===m?e:t;s(n,i,this.outcome)}else this.queue.push(new o(n,e,t));return n},o.prototype.callFulfilled=function(e){v.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){v.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},v.resolve=function(e,t){var n=a(c,t);if("error"===n.status)return v.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=m,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},v.reject=function(e,t){e.state=y,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=f,n.reject=l,n.all=h,n.race=p},{immediate:7}],17:[function(e,t,n){function r(){if(!c){c=!0;for(var e,t=s.length;t;){e=s,s=[];for(var n=-1;++n<t;)e[n]();t=s.length}c=!1}}function i(){}var o=t.exports={},s=[],c=!1;o.nextTick=function(e){s.push(e),c||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],18:[function(e,t,n){!function(e){if("object"==typeof n)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var r;try{r=window}catch(i){r=self}r.SparkMD5=e()}}(function(e){"use strict";var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,o,s){return n=t(t(n,e),t(i,s)),t(n<<o|n>>>32-o,r)},r=function(e,t,r,i,o,s,c){return n(t&r|~t&i,e,t,o,s,c)},i=function(e,t,r,i,o,s,c){return n(t&i|r&~i,e,t,o,s,c)},o=function(e,t,r,i,o,s,c){return n(t^r^i,e,t,o,s,c)},s=function(e,t,r,i,o,s,c){return n(r^(t|~i),e,t,o,s,c)},c=function(e,n){var c=e[0],u=e[1],a=e[2],f=e[3];c=r(c,u,a,f,n[0],7,-680876936),f=r(f,c,u,a,n[1],12,-389564586),a=r(a,f,c,u,n[2],17,606105819),u=r(u,a,f,c,n[3],22,-1044525330),c=r(c,u,a,f,n[4],7,-176418897),f=r(f,c,u,a,n[5],12,1200080426),a=r(a,f,c,u,n[6],17,-1473231341),u=r(u,a,f,c,n[7],22,-45705983),c=r(c,u,a,f,n[8],7,1770035416),f=r(f,c,u,a,n[9],12,-1958414417),a=r(a,f,c,u,n[10],17,-42063),u=r(u,a,f,c,n[11],22,-1990404162),c=r(c,u,a,f,n[12],7,1804603682),f=r(f,c,u,a,n[13],12,-40341101),a=r(a,f,c,u,n[14],17,-1502002290),u=r(u,a,f,c,n[15],22,1236535329),c=i(c,u,a,f,n[1],5,-165796510),f=i(f,c,u,a,n[6],9,-1069501632),a=i(a,f,c,u,n[11],14,643717713),u=i(u,a,f,c,n[0],20,-373897302),c=i(c,u,a,f,n[5],5,-701558691),f=i(f,c,u,a,n[10],9,38016083),a=i(a,f,c,u,n[15],14,-660478335),u=i(u,a,f,c,n[4],20,-405537848),c=i(c,u,a,f,n[9],5,568446438),f=i(f,c,u,a,n[14],9,-1019803690),a=i(a,f,c,u,n[3],14,-187363961),u=i(u,a,f,c,n[8],20,1163531501),c=i(c,u,a,f,n[13],5,-1444681467),f=i(f,c,u,a,n[2],9,-51403784),a=i(a,f,c,u,n[7],14,1735328473),u=i(u,a,f,c,n[12],20,-1926607734),c=o(c,u,a,f,n[5],4,-378558),f=o(f,c,u,a,n[8],11,-2022574463),a=o(a,f,c,u,n[11],16,1839030562),u=o(u,a,f,c,n[14],23,-35309556),c=o(c,u,a,f,n[1],4,-1530992060),f=o(f,c,u,a,n[4],11,1272893353),a=o(a,f,c,u,n[7],16,-155497632),u=o(u,a,f,c,n[10],23,-1094730640),c=o(c,u,a,f,n[13],4,681279174),f=o(f,c,u,a,n[0],11,-358537222),a=o(a,f,c,u,n[3],16,-722521979),u=o(u,a,f,c,n[6],23,76029189),c=o(c,u,a,f,n[9],4,-640364487),f=o(f,c,u,a,n[12],11,-421815835),a=o(a,f,c,u,n[15],16,530742520),u=o(u,a,f,c,n[2],23,-995338651),c=s(c,u,a,f,n[0],6,-198630844),f=s(f,c,u,a,n[7],10,1126891415),a=s(a,f,c,u,n[14],15,-1416354905),u=s(u,a,f,c,n[5],21,-57434055),c=s(c,u,a,f,n[12],6,1700485571),f=s(f,c,u,a,n[3],10,-1894986606),a=s(a,f,c,u,n[10],15,-1051523),u=s(u,a,f,c,n[1],21,-2054922799),c=s(c,u,a,f,n[8],6,1873313359),
f=s(f,c,u,a,n[15],10,-30611744),a=s(a,f,c,u,n[6],15,-1560198380),u=s(u,a,f,c,n[13],21,1309151649),c=s(c,u,a,f,n[4],6,-145523070),f=s(f,c,u,a,n[11],10,-1120210379),a=s(a,f,c,u,n[2],15,718787259),u=s(u,a,f,c,n[9],21,-343485551),e[0]=t(c,e[0]),e[1]=t(u,e[1]),e[2]=t(a,e[2]),e[3]=t(f,e[3])},u=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},a=function(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},f=function(e){var t,n,r,i,o,s,a=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;a>=t;t+=64)c(f,u(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(c(f,r),t=0;16>t;t+=1)r[t]=0;return i=8*a,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),s=parseInt(i[1],16)||0,r[14]=o,r[15]=s,c(f,r),f},l=function(e){var t,n,r,i,o,s,u=e.length,f=[1732584193,-271733879,-1732584194,271733878];for(t=64;u>=t;t+=64)c(f,a(e.subarray(t-64,t)));for(e=u>t-64?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;n>t;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(c(f,r),t=0;16>t;t+=1)r[t]=0;return i=8*u,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),s=parseInt(i[1],16)||0,r[14]=o,r[15]=s,c(f,r),f},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(e){var t,n="";for(t=0;4>t;t+=1)n+=h[e>>8*t+4&15]+h[e>>8*t&15];return n},d=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=p(e[t]);return e.join("")},v=function(e){return d(f(e))},y=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==v("hello")&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),y.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},y.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;n>=t;t+=64)c(this._state,u(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},y.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=e?this._state:d(this._state),this.reset(),n},y.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),o>55)for(c(this._state,e),o=0;16>o;o+=1)e[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,c(this._state,e)},y.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},y.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=f(e);return t?n:d(n)},y.hashBinary=function(e,t){var n=f(e);return t?n:d(n)},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;r>=t;t+=64)c(this._state,a(n.subarray(t-64,t)));return this._buff=r>t-64?n.subarray(t-64):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;i>t;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=e?this._state:d(this._state),this.reset(),n},y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},y.ArrayBuffer.hash=function(e,t){var n=l(new Uint8Array(e));return t?n:d(n)},y})},{}],19:[function(e,t,n){"use strict";function r(e,t,n){return s.replicate(e,this,t,n)}function i(e,t,n){return s.replicate(this,e,t,n)}function o(e,t,n){return c(this,e,t,n)}var s=e("./fully-replicate"),c=e("./sync");t.exports={fullyReplicateFrom:r,fullyReplicateTo:i,fullySync:o},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{"./fully-replicate":1,"./sync":3}]},{},[19]);
